!function(e,l){"object"==typeof exports&&"undefined"!=typeof module?module.exports=l(require("vue")):"function"==typeof define&&define.amd?define(["vue"],l):(e="undefined"!=typeof globalThis?globalThis:e||self).ColorPicker=l(e.Vue)}(this,(function(e){"use strict";let l={hsb2rgb(e){var l={},t=Math.round(e.h),o=Math.round(255*e.s/100),r=Math.round(255*e.b/100);if(0==o)l.r=l.g=l.b=r;else{var n=r,a=(255-o)*r/255,i=t%60*(n-a)/60;360==t&&(t=0),t<60?(l.r=n,l.b=a,l.g=a+i):t<120?(l.g=n,l.b=a,l.r=n-i):t<180?(l.g=n,l.r=a,l.b=a+i):t<240?(l.b=n,l.r=a,l.g=n-i):t<300?(l.b=n,l.g=a,l.r=a+i):t<360?(l.r=n,l.g=a,l.b=n-i):(l.r=0,l.g=0,l.b=0)}return{r:Math.round(l.r),g:Math.round(l.g),b:Math.round(l.b),a:e.a}},hsba2rgba(e){const l=this.hsb2rgb(e);return`rgba(${l.r},${l.g},${l.b},${l.a})`},rgb2hex(e){var l=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return l.map((function(e,t){1==e.length&&(l[t]="0"+e)})),l.join("")},hex2rgb(e){let l=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:l>>16,g:(65280&l)>>8,b:255&l}},hex2hsb(e){const l=this.hex2rgb(e);return l.a=1,this.rgba2hsba(l)},rgba2hsba(e){var l={h:0,s:0,b:0,a:e.a},t=Math.min(e.r,e.g,e.b),o=Math.max(e.r,e.g,e.b),r=o-t;return l.b=o,l.s=0!=o?255*r/o:0,0!=l.s?e.r==o?l.h=(e.g-e.b)/r:e.g==o?l.h=2+(e.b-e.r)/r:l.h=4+(e.r-e.g)/r:l.h=-1,l.h*=60,l.h<0&&(l.h+=360),l.s*=100/255,l.b*=100/255,l}};var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAM0lEQVQ4EWM8cuTIfwY8wMbGhhGPNAMTPkli5EYNYBgEgYg3jkHRSCidjEbjYIhGimMBAKIWB2rXs92IAAAAAElFTkSuQmCC",o=(e,l)=>{const t=e.__vccOpts||e;for(const[o,r]of l)t[o]=r;return t};const r=l=>(e.pushScopeId("data-v-06bdfe81"),l=l(),e.popScopeId(),l),n={onselectstart:"return false"},a=["onContextmenu"],i={class:"activeMode-wrapper"},s=["onClick"],c=["onClick","onMousedown"],u=["onClick"],d={style:{"font-size":"10px",width:"36px","padding-left":"8px"}},p={class:"palette-wrapper"},f=["onClick"],v=r((()=>e.createElementVNode("div",{class:"white"},null,-1))),h=r((()=>e.createElementVNode("div",{class:"black"},null,-1))),g={class:"huebar-wrapper"},b={class:"bar-wrapper"},m=["onClick"],A=["onClick"],y=["onClick"],k={class:"preview-wrapper"},w={name:"vue3-colorpicker"};return o(Object.assign(w,{props:{mode:{type:String,required:!1,default:"solid"},degree:{type:Number,required:!1,default:90},color:{type:Object,required:!1,default:()=>({r:0,g:0,b:0,a:1})},gradients:{type:Object,required:!1,default:()=>[{percent:0,color:{r:255,g:255,b:255,a:1}},{percent:100,color:{r:0,g:0,b:0,a:1}}]},supportedModes:{type:Array,required:!1,default:()=>["solid","linear","radial"]},showOpacityPicker:{type:Boolean,required:!1,default:!0},showDegreePicker:{type:Boolean,required:!1,default:!0},showPanelOnly:{type:Boolean,required:!1,default:!1}},emits:["colorChanged"],setup(o,{expose:r,emit:w}){const E=o,M=e.ref(null),x=e.ref(null),C=e.ref(null),B=e.ref(null),N=e.ref(null),V=e.ref(null),$=e.ref(null),P=e.ref(null),S=e.ref(null),L=e.ref(null),O=e.ref(null),_=e.ref(!1),T=e.ref(0),D=e.ref(""),I=e.ref(""),z=e.ref(""),Y=e.ref(!0),q=e.reactive(l.rgba2hsba(E.color)),j=e.ref(E.degree),Q=e.ref(E.mode);let X=[];const G=e.ref(X);E.gradients.length>0?E.gradients.forEach(((e,t)=>{X.push({id:t,percent:e.percent,color:l.rgba2hsba(e.color)})})):E.color&&(X.push({id:0,percent:0,color:l.rgba2hsba(E.color)}),X.push({id:1,percent:100,color:l.rgba2hsba({r:0,g:0,b:0,a:1})})),G.value=X,X.length>0&&G.value[G.value.length-1].id;let R=!1,K=216,H=138,W=E.showDegreePicker?150:K,F=0,U=null;function J(e){if(Q.value=e,"solid"!==Q.value){G.value.forEach(((e,l)=>{S.value.children[l].style.left=(W-9)/100*e.percent-3+"px"})),E.showDegreePicker.value&&setDegreePickerPos();const e=G.value[T.value].color;q.h=e.h,q.s=e.s,q.b=e.b,q.a=e.a}fe(),ie(),se()}async function Z(){if(!U)return!1;U.open().then((e=>{const t=l.hex2hsb(e.sRGBHex);q.h=t.h,q.s=t.s,q.b=t.b,q.a=t.a,fe()})).catch((e=>{}))}function ee(){return!1}function le(){var l,t,o;27==(null==(l=null==window?void 0:window.event)?void 0:l.keyCode)?_.value=!1:32!=(null==(t=null==window?void 0:window.event)?void 0:t.keyCode)&&8!=(null==(o=null==window?void 0:window.event)?void 0:o.keyCode)||G.value.length>2&&(G.value.splice(T.value,1),T.value=G.value.length-1,e.nextTick((()=>se())))}function te(e){let l=e.getBoundingClientRect(),t=e.ownerDocument,o=t.body,r=t.documentElement,n=r.clientTop||o.clientTop||0,a=r.clientLeft||o.clientLeft||0;return{top:l.top+(self.pageYOffset||r.scrollTop||o.scrollTop)-n,left:l.left+(self.pageXOffset||r.scrollLeft||o.scrollLeft)-a}}function oe(){let e=0,l=0,t=window.event;return t.pageX?(e=t.pageX,l=t.pageY):(e=t.clientX+document.body.scrollLeft-document.body.clientLeft,l=t.clientY+document.body.scrollTop-document.body.clientTop),{x:e,y:l}}function re(){if(R)return R=!1,!1;function e(e){const l=te(e),t=oe();return!(t.x>l.left+e.offsetWidth||t.x<l.left||t.y>l.top+e.offsetHeight||t.y<l.top)}e(x.value)||e(M.value)||(_.value=!1)}function ne(e,l,t){function o(){R=!0,l(e,t)}document.addEventListener("mousemove",o,!1),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",e)}),!1)}function ae(e,l){const t=te(S.value),o=oe();let r=Math.max(-3,Math.min(W-12,o.x-t.left-6));e.style.left=r+"px",G.value[l].percent=(r+3)/(W-9)*100,T.value=l;const n=G.value[l].color;q.h=n.h,q.s=n.s,q.b=n.b,q.a=n.a,fe(),ie(),se()}function ie(){"solid"!==Q.value&&(G.value[T.value].color.a=q.a,G.value[T.value].color.h=q.h,G.value[T.value].color.s=q.s,G.value[T.value].color.b=q.b)}function se(){const e=l.hsb2rgb(q);D.value=`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`,I.value=D.value;let o="",r="",n=[...G.value],a=[];n.sort(((e,l)=>e.percent-l.percent)),n.forEach((e=>{o+=","+l.hsba2rgba(e.color)+" "+e.percent+"%",a.push({percent:e.percent,color:l.hsb2rgb(e.color)})}));const i={};switch(i.mode=Q.value,Q.value){case"solid":i.color=l.hsb2rgb(q),i.css=`background-color:${l.hsba2rgba(q)}`;break;case"linear":z.value=`linear-gradient(to right,${o.slice(1)}),url('${t}')`,I.value=`linear-gradient(${j.value}deg${o}),url('${t}')`,r=`background-image:linear-gradient(${j.value}deg${o})`,i.degree=j.value,i.color=a,i.css=r;break;case"radial":z.value=`linear-gradient(to right,${o.slice(1)}),url('${t}')`,I.value=`radial-gradient(${o.slice(1)}),url('${t}')`,r=`background-image:radial-gradient(${o.slice(1)})`,i.color=a,i.css=r}w("colorChanged",i)}function ce(){const e=te(L.value),l=oe(),t=Math.atan2(e.top+10-l.y,l.x-e.left-10);O.value.style.left=10*Math.cos(t)+4+1+"px",O.value.style.top=10*-Math.sin(t)+4+1+"px";let o=90-Math.floor(180*t/Math.PI);o<0&&(o+=360),j.value=o,ie(),se()}function ue(){const e=te(C.value),l=oe(),t=Math.max(-6,Math.min(l.x-e.left-6,210)),o=Math.max(-6,Math.min(l.y-e.top-6,132));B.value.style.left=t+"px",B.value.style.top=o+"px",q.s=100*(t+6)/K,q.b=100*(H-o-6)/H}function de(){const e=te($.value),t=oe(),o=Math.max(-3,Math.min(t.x-e.left-6,138));N.value.style.left=o+"px",q.h=360*(o+3)/141;const r=l.hsb2rgb({h:q.h,s:100,b:100,a:q.a});C.value.style.background=`rgb(${r.r},${r.g},${r.b},1)`}function pe(){const e=te(P.value),l=oe(),t=Math.max(-3,Math.min(138,l.x-e.left-6));V.value.style.left=t+"px",q.a=(t+3)/141}function fe(){const e=l.hsb2rgb({h:q.h,s:100,b:100,a:q.a});C.value.style.background=`rgb(${e.r},${e.g},${e.b},1)`,B.value.style.left=2.16*q.s-6+"px",B.value.style.top=H-1.38*q.b-6+"px",N.value.style.left=141/360*q.h-3+"px",E.showOpacityPicker.value&&(V.value.style.left=141*q.a-3+"px")}function ve(){_.value=!_.value}return"EyeDropper"in window?U=new EyeDropper:Y.value=!1,e.onMounted((()=>{J(Q.value),ie(),se()})),e.watch(q,(()=>{ie(),se()})),e.watch(_,(()=>{_.value?(document.addEventListener("click",re,!0),document.addEventListener("keyup",le,!1)):(document.removeEventListener("click",re,!0),document.removeEventListener("keyup",le,!1))})),r({openPanel:function(){_.value=!0},closePanel:function(){_.value=!1},togglePanel:ve}),(l,t)=>(e.openBlock(),e.createElementBlock("div",n,[o.showPanelOnly?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"cbtn",onClick:ve,ref_key:"cbtnEl",ref:M},[e.createElementVNode("div",{class:"cbtn-inner",style:e.normalizeStyle({background:I.value})},null,4)],512)),e.withDirectives(e.createElementVNode("div",{class:"panel",ref_key:"panelEl",ref:x,onContextmenu:e.withModifiers(ee,["prevent"])},[e.createElementVNode("div",i,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.supportedModes,(l=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["btn-activeMode",[l,{gray:Q.value!==l}]]),onClick:e.withModifiers((e=>J(l)),["stop"])},null,10,s)))),256))]),e.createElementVNode("div",{class:"grad-wrapper",style:e.normalizeStyle("solid"===Q.value?"display:none":"")},[e.createElementVNode("div",{class:e.normalizeClass(["grad-bar",{"full-width":!o.showDegreePicker}]),ref_key:"gradBarEl",ref:S,style:e.normalizeStyle({backgroundImage:z.value}),onClick:t[0]||(t[0]=e.withModifiers((l=>function(){if(G.value.length<10){const l=JSON.parse(JSON.stringify(G.value[T.value]));l.id=F++,G.value.push(l),T.value=G.value.length-1,e.nextTick((()=>ae(S.value.children[T.value],T.value)))}}()),["stop"]))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(G.value,((l,t)=>(e.openBlock(),e.createElementBlock("div",{key:l.id,style:{top:"-1px"},class:e.normalizeClass(["picker",t==T.value?"on":""]),onClick:e.withModifiers((e=>ae(e.target,t)),["stop"]),onMousedown:e.withModifiers((e=>ne(e.target,ae,t)),["stop"])},null,42,c)))),128))],6),o.showDegreePicker?(e.openBlock(),e.createElementBlock("div",{key:0,class:"flex-row",style:e.normalizeStyle("linear"===Q.value?"":"visibility:hidden")},[e.createElementVNode("div",{class:"degree",ref_key:"degreeEl",ref:L,onClick:e.withModifiers(ce,["stop"]),onMousedown:t[2]||(t[2]=e.withModifiers((e=>ne(e,ce)),["stop"]))},[e.createElementVNode("div",{class:"picker-deg",ref_key:"degreePickerEl",ref:O,onMousedown:t[1]||(t[1]=e.withModifiers((e=>ne(e,ce)),["stop"]))},null,544)],40,u),e.createElementVNode("div",d,e.toDisplayString(j.value)+"°",1)],4)):e.createCommentVNode("",!0)],4),e.createElementVNode("div",p,[e.createElementVNode("div",{class:"palette",ref_key:"paletteEl",ref:C,onClick:e.withModifiers(ue,["stop"]),onMousedown:t[4]||(t[4]=e.withModifiers((e=>ne(e,ue)),["stop"]))},[v,h,e.createElementVNode("div",{class:"picker",ref_key:"palettePickerEl",ref:B,onMousedown:t[3]||(t[3]=e.withModifiers((e=>ne(e,ue)),["stop"]))},null,544)],40,f)]),e.createElementVNode("div",g,[e.createElementVNode("div",{class:"dropper",onClick:Z,style:e.normalizeStyle([{cursor:"pointer"},Y.value?"":"opacity: 50%;cursor:default"])},null,4),e.createElementVNode("div",b,[e.createElementVNode("div",{class:"hue-bar",ref_key:"hueBarEl",ref:$,onClick:e.withModifiers(de,["stop"]),onMousedown:t[6]||(t[6]=e.withModifiers((e=>ne(e,de)),["stop"]))},[e.createElementVNode("div",{class:"picker",ref_key:"huePickerEl",ref:N,style:{top:"-1px"},onMousedown:t[5]||(t[5]=e.withModifiers((e=>ne(e,de)),["stop"]))},null,544)],40,m),o.showOpacityPicker?(e.openBlock(),e.createElementBlock("div",{key:0,class:"opacity-bar",ref_key:"opactiyBarEl",ref:P,onClick:e.withModifiers(pe,["stop"]),onMousedown:t[8]||(t[8]=e.withModifiers((e=>ne(e,pe)),["stop"]))},[e.createElementVNode("div",{class:"picker",ref_key:"opacityPickerEl",ref:V,style:{top:"-1px"},onClick:e.withModifiers(pe,["stop"]),onMousedown:t[7]||(t[7]=e.withModifiers((e=>ne(e,pe)),["stop"]))},null,40,y)],40,A)):e.createCommentVNode("",!0)]),e.createElementVNode("div",k,[e.createElementVNode("div",{class:"preview-color",style:e.normalizeStyle({background:D.value})},null,4)])])],40,a),[[e.vShow,o.showPanelOnly||_.value]])]))}}),[["__scopeId","data-v-06bdfe81"]])}));
